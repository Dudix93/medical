<ion-header>
  <ion-navbar>
    <ion-title>Preferencje</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
        <ion-segment [(ngModel)]="pref">
                <ion-segment-button value="hours">
                  Dni/Godziny
                </ion-segment-button>
                <ion-segment-button value="notifications">
                  Powiadomienia
                </ion-segment-button>
              </ion-segment>

    <ng-container *ngIf="pref == 'hours'">
        <form (ngSubmit)="saveUserPreferences()">
            <ion-grid>
                <ion-row>
                  <ion-col col-6><ion-label></ion-label></ion-col>
                  <ion-col col-6><ion-label>Godziny</ion-label></ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-6><ion-label>Dni</ion-label></ion-col>
                    <ion-col col-3><ion-label>Od</ion-label></ion-col>
                    <ion-col col-3><ion-label>Do</ion-label></ion-col>
                </ion-row>
            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.pon" name="pon"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Poniedziałek</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.ponOd" name="ponOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.ponDo" name="ponDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>
            
            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.wt" name="wt"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Wtorek</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.wtOd" name="wtOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.wtDo" name="wtDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>

            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.sr" name="sr"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Środa</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.srOd" name="srOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.srDo" name="srDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>

            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.czw" name="czw"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Czwartek</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.czwOd" name="czwOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.czwDo" name="czwDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>

            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.pt" name="pt"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Piątek</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.ptOd" name="ptOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.ptDo" name="ptDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>

            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.sob" name="sob"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Sobota</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.sobOd" name="sobOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.sobDo" name="sobDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>

            <ion-row>
                <ion-col col-1><ion-checkbox [(ngModel)]="settings.nd" name="nd"></ion-checkbox></ion-col>
                <ion-col col-5><ion-label>Niedziela</ion-label></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.ndOd" name="ndOd" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
                <ion-col col-3><ion-datetime [(ngModel)]="settings.ndDo" name="ndDo" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime></ion-col>
            </ion-row>
            </ion-grid>
            <button ion-button type="submit">Zapisz ustawienia</button>
          </form>
        </ng-container>

        <ng-container *ngIf="pref == 'notifications'">
            <br>
            <ion-item>
                <ion-label>Nowe wiadomości</ion-label>
                <ion-toggle [(ngModel)]="notifications.newMsgsNotificacion"></ion-toggle>
            </ion-item>
            
            <ion-item>
                    <ion-label>Powiadomienie o trwającej czynności</ion-label>
                    <ion-select [(ngModel)]="notifications.taskInProgressOption">
                      <ion-option *ngFor="let t of taskInProgressNotification" value="{{t.value}}">{{t.name}}</ion-option>
                    </ion-select>
            </ion-item>

            <ion-item>
                <ion-label>Własne powiadomienie</ion-label>
                <ion-toggle [(ngModel)]="notifications.ownNotification"></ion-toggle>
            </ion-item>
            <ion-item>
                    <ion-label>Godzina</ion-label>
                    <ion-datetime *ngIf="notifications.ownNotification == true" [(ngModel)]="notifications.ownNotificationTime" name="ownNotificationTime" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime>
                    <ion-datetime *ngIf="notifications.ownNotification == false" [disabled]="true" [(ngModel)]="notifications.ownNotificationTime" name="ownNotificationTime" displayFormat="HH:mm" pickerFormat="HH mm"></ion-datetime>
            </ion-item>

            <ion-item>
                <ion-label>Data</ion-label>
                <ion-datetime *ngIf="notifications.ownNotification == true" displayFormat="MM/DD/YYYY" [(ngModel)]="notifications.ownNotificationDate"></ion-datetime>
                <ion-datetime *ngIf="notifications.ownNotification == false" [disabled]="true" displayFormat="MM/DD/YYYY" [(ngModel)]="notifications.ownNotificationDate"></ion-datetime>
            </ion-item>

            <ion-item>
                    <ion-label floating>Treść powiadomienia</ion-label>
                    <ion-input *ngIf="notifications.ownNotification == true" type="text" [(ngModel)]="notifications.ownNotificationMsg" name="ownNotificationTime" clearInput></ion-input>   
                    <ion-input *ngIf="notifications.ownNotification == false" [disabled]="true" type="text" [(ngModel)]="notifications.ownNotificationMsg" name="ownNotificationTime" clearInput></ion-input>        
            </ion-item> 
            <button ion-button (click)="saveUserPreferences()">Zapisz ustawienia</button>
        </ng-container>
</ion-content>
